
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>1. Getting Started Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Use of the database.html" />
    
    
    <link rel="prev" href="Overview.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Overview.html">
            
                <a href="Overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="Getting Started.html">
            
                <a href="Getting Started.html">
            
                    
                    1. Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Use of the database.html">
            
                <a href="Use of the database.html">
            
                    
                    2. Use of the Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Maintenance of the database.html">
            
                <a href="Maintenance of the database.html">
            
                    
                    3. Maintenance of the Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Android Studio Installation & Use.html">
            
                <a href="Android Studio Installation & Use.html">
            
                    
                    4. Android Studio Installation & Use
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="JavaCC Basic Knowledge.html">
            
                <a href="JavaCC Basic Knowledge.html">
            
                    
                    5.JavaCC Basic Knowledge
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >1. Getting Started</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="1-getting-started">1 Getting Started</h1>
<p>It is recommended to use totem database in the following configurations&#xFF1A;</p>
<pre><code>OS: Ubuntu 18.04 LTS 64-bit
Memory: 8G RAM
Hard disk: 20G
</code></pre><h2 id="11-installation">1.1 Installation</h2>
<p>  Totem can be installed by any unprivileged user and does not require superuser(root) privileges. The steps to install Totem on an ubuntu system are as follows.</p>
<p> (1) Create the totem user
 You should set up a dedicated user name for the database, such as totem, as the superuser of Totem at runtime. Enter the command&#xFF1A;</p>
<pre><code>adduser totem
</code></pre><p>There is a security problem when running as root, bin or other special privilege user. In fact, tmaster refuses to run as root.</p>
<p>(2) Download deb package
Download the deb installation package of totem from the website of <a href="http://totemdb.whu.edu.cn/" target="_blank">Luojia Totem Lab</a>.</p>
<p>(3) Install</p>
<pre><code>sudo dpkg -i totem_1.0-1_amd64.deb
</code></pre><p>The default installation location is: /usr/local/totem</p>
<p>(4) Modify directory permissions
Modify /usr/local/totem permissions</p>
<pre><code>cd /usr/local
sudo chown -R totem totem
</code></pre><p>After completing the above steps, the Totem database system has been installed. You still need to initialize the database before you can start the database service.</p>
<h2 id="12-launching-the-database">1.2 Launching the database</h2>
<p>You need to initialize the database directory before launching the database. Create Totem&apos;s data directory in the <strong>/usr/local/totem</strong> directory and do the
Initialize.</p>
<pre><code>mkdir /usr/local/totem/data
/usr/local/totem/bin/initdb -D ../data #&#x5728;totem&#x7528;&#x6237;&#x4E0B;&#x6267;&#x884C;
</code></pre><p>After successful connection using tsql, you can see the following image.</p>
<p><img src="https://user-images.githubusercontent.com/113097627/194810402-09f6c3fa-1177-4a0f-8505-3842f90cc177.png" alt="image-1"></p>
<h2 id="13-create-the-database">1.3 Create the database</h2>
<p>The first example to see if you can access a database server is to try to create a database. A running TOTEM server can manage many databases. Usually we use a separate database for each project and each user. Your node administrator may have already created a database for Your node administrator has probably already created a database for you to use. He should have told you the name of this database. If so, you can skip this step and
skip to the next section. To create a new database, called mydb in our example, you can use the following command.</p>
<pre><code>$ ./createdb mydb #Execute this command under /usr/local/totem/bin
</code></pre><p>It should generate a response like this.</p>
<p><img src="https://user-images.githubusercontent.com/113097627/194810477-64e15af1-ac70-488f-bd36-240763f55a44.png" alt="image-2"></p>
<p>If so, then this step is successful and you can ignore the rest of this section.
If you see a similar message that reads&#xFF1A;</p>
<pre><code>createdb: could not connect to database totem: could not connect to server:
No such file or directory
Is the server running locally and accepting
connections on Unix domain socket &quot;/tmp/.s.PGSQL.5432&quot;?
</code></pre><p>This means that the server is not started, or not started where createdb expects it to be. Again, you will want to check the installation instructions or find the administrator.
Another response might be something like:</p>
<pre><code>createdb: could not connect to database totem: FATAL: user &quot;joe&quot; does not exist
</code></pre><p>Your own login name is mentioned here. If the administrator did not create TOTEM user account for you, the following will happen (TOTEM user account and OS user account are different). You need to become the identity of the OS user who installed TOTEM (usually totem) to create your first user account. It is also possible that the TOTEM user name given to you and your operating system user name are different. In this case, you need to declare your TOTEM user name using the -U switch or using the PGUSER environment variable.
If you have a database user account, but do not have the permissions needed to create the database, then you will see something like the following.</p>
<pre><code>createdb: database creation failed: ERROR: permission denied to create database
</code></pre><p>Not all users are authorized to create new databases. If TOTEM refuses to create a database for you, then you need to ask your node administrator to grant you permission to create a database. Please consult your node administrator when this happens. If you installed TOTEM yourself, then you should log in as the user who started the database server and then refer to the manual to complete the privilege granting process.
TOTEM allows you to create any number of databases on a node. Database names must start with a letter and have a maximum length of 31 characters. A convenient approach is to create databases with the same name as your current username. Many tools assume that the database name is the default database name, so this will save you work. To create such a database, simply type</p>
<pre><code>$ ./createdb
</code></pre><p>If you don&apos;t want to use your database anymore, then you can delete it. For example, if you are the owner of the database mydb (created person), then you can delete it with the following command.</p>
<pre><code>$ ./dropdb mydb
</code></pre><h2 id="14-accessing-the-database">1.4 Accessing the database</h2>
<p>Once you have created a database, you can access it by. Running the TOTEM terminal monitor program tsql, where you can enter, edit and execute SQL commands. The next section describes how to run tsql, using the previous example of mydb. Enter the command . /tsql mydb and you will see the following response.</p>
<p><img src="https://user-images.githubusercontent.com/113097627/194860193-151404fd-ebf5-41f7-91d4-2ecb10e40ff8.png" alt="image-3"></p>
<p>The prompt <em>mydb=#</em> indicates that you are in the terminal monitor and can type SQL queries into the workspace managed by the terminal monitor.
The monitor program tsql responds to special commands that begin with the backslash character &apos;\&apos;.
For example, you can type the following command to get syntax help for various TOTEM SQL commands:</p>
<pre><code>mydb=# \h
</code></pre><p><img src="https://user-images.githubusercontent.com/113097627/194862041-3986b7df-84a9-4c95-992c-c28b6da6c9b6.png" alt="image-4"></p>
<p>Once you have finished entering your query into the workspace, you can type the following to submit your workspace to the server:</p>
<pre><code>mydb=&gt; \g
</code></pre><p>This sentence tells the server to process the query. If your query ends in a semicolon, you do not need to use the &quot;\g&quot; command; tdsql will automatically process queries ending in a semicolon queries that end with a semicolon.
To read a query from a file, such as myFile, rather than typing it on the command line, type:</p>
<pre><code>\i myFile
</code></pre><p>Exit from tsql back to UNIX, type:</p>
<pre><code>\q
</code></pre><p>Then tsql will exit and go back to your command line. Blanks (e.g., empty spaces, tabs and newlines, etc.) can be used freely in SQL queries. Single line comments use <em>&quot;--&quot;</em>. All content on that line that follows this symbol in that line will be ignored. For multi-line comments or intra-line comments, use <em>&quot;/</em> ... <em>/&quot;</em>.</p>
<h2 id="15-database-configuration">1.5 Database Configuration</h2>
<p>The configuration file is named totem.conf and is located in the database cluster directory. It includes the listening ip and port, database log settings, memory parameter settings (shared memory, temporary memory). settings (shared memory, temporary memory). Changes are made under this configuration file according to the needs of the application.
Client authentication is controlled by a configuration file (usually named totem_hba.conf ), which is stored in the data directory of the database cluster. HBA stands for &quot;host-based authentication&quot;. When initdb initializes the data directory, it installs a default When initdb initializes the data directory, it installs a default totem_hba.conf file.
The common format of the totem_hba.conf file is a set of records, one per line. Blank lines are ignored, and comments starting with the # symbol are ignored. are ignored. Records cannot exist across lines. A record consists of a number of fields separated by spaces and/or tabs. If a field is enclosed in quotation marks then it can contain whitespace. Quoting a keyword (e.g., all or replication) in a database, user, or address file causes the word to lose its special meaning. The word loses its special meaning and is simply used to match a database, user, or host with that name.
Each record declares a connection type, a range of client IP addresses (if relevant to the connection type), a database name, a user name, and the authentication method used for connections that match these parameters. The first record matching the connection type, client address, database name and user name of the connection request will be The first record matching the connection type, the client address, the database name and the user name of the connection request will be used to perform the authentication. There is no &quot;leapfrogging&quot; or &quot;backtracking&quot; in this process: if a record is selected and authentication fails, it will no longer be used, the subsequent records are not considered. If there is no matching record, then access is denied.</p>
<p>Each record can be in one of the following seven formats:</p>
<pre><code>local database user auth-method [auth-options]
host database user address auth-method [auth-options]
hostssl database user address auth-method [auth-options]
hostnossl database user address auth-method [auth-options]
host database user IP-address IP-mask auth-method [auth-options]
hostssl database user IP-address IP-mask auth-method [auth-options]
hostnossl database user IP-address IP-mask auth-method [auth-options]
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Overview.html" class="navigation navigation-prev " aria-label="Previous page: Overview">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Use of the database.html" class="navigation navigation-next " aria-label="Next page: 2. Use of the Database">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"1. Getting Started","level":"1.3","depth":1,"next":{"title":"2. Use of the Database","level":"1.4","depth":1,"path":"Use of the database.md","ref":"Use of the database.md","articles":[]},"previous":{"title":"Overview","level":"1.2","depth":1,"path":"Overview.md","ref":"Overview.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Getting Started.md","mtime":"2022-10-10T12:59:17.608Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-10-11T12:43:43.494Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

